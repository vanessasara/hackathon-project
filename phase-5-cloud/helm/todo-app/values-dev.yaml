# Development values for todo-app (Minikube)
# These values override the defaults in values.yaml for local development

# Single replica for development
replicaCount:
  frontend: 1
  backend: 1

# Images built in Minikube's Docker daemon
image:
  frontend:
    repository: todo-frontend
    tag: latest
    pullPolicy: Never  # Images are in Minikube, don't pull from registry
  backend:
    repository: todo-backend
    tag: latest
    pullPolicy: Never  # Images are in Minikube, don't pull from registry

# Service configuration for Minikube
service:
  frontend:
    type: NodePort  # Expose via NodePort for browser access
    port: 3000
    targetPort: 3000
    nodePort: 30300  # Fixed port for consistent access
  backend:
    type: ClusterIP  # Internal only
    port: 8000
    targetPort: 8000

# Lower resource limits for development
resources:
  frontend:
    requests:
      memory: "128Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "250m"
  backend:
    requests:
      memory: "128Mi"
      cpu: "50m"
    limits:
      memory: "256Mi"
      cpu: "250m"

# Faster health check startup for development
healthProbe:
  frontend:
    readiness:
      path: /api/health
      port: 3000
      initialDelaySeconds: 10  # Faster startup
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
    liveness:
      path: /api/health
      port: 3000
      initialDelaySeconds: 30
      periodSeconds: 15
      timeoutSeconds: 5
      failureThreshold: 3
  backend:
    readiness:
      path: /api/health
      port: 8000
      initialDelaySeconds: 5  # Faster startup
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
    liveness:
      path: /api/health
      port: 8000
      initialDelaySeconds: 20
      periodSeconds: 15
      timeoutSeconds: 5
      failureThreshold: 3

# Configuration (non-sensitive) - uses defaults from values.yaml
config:
  # BETTER_AUTH_URL must match the URL used to access the app from browser
  BETTER_AUTH_URL: "http://localhost:3000"
  FRONTEND_URL: "http://localhost:3000"
  BACKEND_URL: "http://todo-app-backend:8000"
  LLM_PROVIDER: "openai"
  OPENAI_DEFAULT_MODEL: "gpt-4o-mini"
  NEXT_PUBLIC_CHATKIT_API_URL: "/api/chat"

# Secrets - MUST be provided via --set or .env file
# Never commit actual secret values!
secrets:
  DATABASE_URL: ""
  BETTER_AUTH_SECRET: ""
  OPENAI_API_KEY: ""
  CLOUDFLARE_R2_ACCOUNT_ID: ""
  CLOUDFLARE_R2_ACCESS_KEY_ID: ""
  CLOUDFLARE_R2_SECRET_ACCESS_KEY: ""
  CLOUDFLARE_R2_BUCKET_NAME: ""

# Autoscaling disabled for development
autoscaling:
  enabled: false
